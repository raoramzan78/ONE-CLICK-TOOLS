<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator - Multi-Tools</title>
    <meta name="description" content="Generate strong, secure passwords with our free online Password Generator tool. Customize length and character types for maximum security.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header-placeholder"></div>

    <main class="container py-4">
        <div class="row">
            <!-- Main Content -->
            <div class="col-lg-8">
                <!-- Tool Container -->
                <div class="tool-container">
                    <!-- Tool Header -->
                    <div class="tool-header">
                        <h1><i class="fas fa-key me-2"></i> Password Generator</h1>
                        <p class="tool-description">Generate strong, secure passwords with customizable options. Create passwords that are difficult to crack but easy to remember.</p>
                    </div>

                    <!-- Tool Content -->
                    <div class="tool-content">
                        <!-- Password Output -->
                        <div class="password-output mb-4">
                            <label for="password-result" class="form-label">Your Generated Password:</label>
                            <div class="input-group">
                                <input type="text" id="password-result" class="form-control form-control-lg" readonly>
                                <button id="copy-password" class="btn btn-primary" type="button">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button id="refresh-password" class="btn btn-success" type="button">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Password Strength Meter -->
                        <div class="password-strength mb-4">
                            <label class="form-label">Password Strength:</label>
                            <div class="progress">
                                <div id="strength-meter" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <small id="strength-text" class="form-text">No password generated yet</small>
                        </div>

                        <!-- Password Options -->
                        <div class="password-options mb-4">
                            <h4>Password Options</h4>
                            
                            <!-- Password Length -->
                            <div class="mb-3">
                                <label for="password-length" class="form-label">Password Length: <span id="length-value">12</span></label>
                                <input type="range" class="form-range" id="password-length" min="6" max="64" value="12">
                                <div class="d-flex justify-content-between">
                                    <small>6</small>
                                    <small>64</small>
                                </div>
                            </div>
                            
                            <!-- Character Types -->
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="include-uppercase" checked>
                                    <label class="form-check-label" for="include-uppercase">
                                        Include Uppercase Letters (A-Z)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="include-lowercase" checked>
                                    <label class="form-check-label" for="include-lowercase">
                                        Include Lowercase Letters (a-z)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="include-numbers" checked>
                                    <label class="form-check-label" for="include-numbers">
                                        Include Numbers (0-9)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="include-symbols" checked>
                                    <label class="form-check-label" for="include-symbols">
                                        Include Symbols (!@#$%^&*()_+)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="exclude-similar">
                                    <label class="form-check-label" for="exclude-similar">
                                        Exclude Similar Characters (i, l, 1, L, o, 0, O)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="exclude-ambiguous">
                                    <label class="form-check-label" for="exclude-ambiguous">
                                        Exclude Ambiguous Characters ({ } [ ] ( ) / \ ' " ` ~ , ; : . < >)
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Generate Button -->
                            <button id="generate-password" class="btn btn-primary btn-lg w-100">
                                <i class="fas fa-key me-2"></i>Generate Password
                            </button>
                        </div>

                        <!-- Password History -->
                        <div class="password-history mb-4">
                            <h4>Password History</h4>
                            <p class="small text-muted">Recent passwords are stored locally in your browser and are not sent to our servers.</p>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Password</th>
                                            <th>Length</th>
                                            <th>Strength</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="password-history-table">
                                        <tr>
                                            <td colspan="4" class="text-center">No passwords generated yet</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button id="clear-history" class="btn btn-outline-danger btn-sm">
                                <i class="fas fa-trash-alt me-2"></i>Clear History
                            </button>
                        </div>
                    </div>

                    <!-- How to Use Section -->
                    <div class="how-to-use mt-5">
                        <h3>How to Use the Password Generator</h3>
                        <ol>
                            <li>Adjust the password length using the slider.</li>
                            <li>Select the character types you want to include in your password.</li>
                            <li>Click the "Generate Password" button to create a new password.</li>
                            <li>Use the copy button to copy the password to your clipboard.</li>
                            <li>Generate a new password by clicking the refresh button or the "Generate Password" button again.</li>
                        </ol>
                    </div>

                    <!-- Password Security Tips -->
                    <div class="security-tips mt-5">
                        <h3>Password Security Tips</h3>
                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-shield-alt me-2"></i>Use Strong, Unique Passwords</h5>
                                <p class="card-text">Create a different password for each account. This prevents hackers from accessing all your accounts if one password is compromised.</p>
                            </div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-lock me-2"></i>Use a Password Manager</h5>
                                <p class="card-text">Password managers help you generate, store, and autofill strong passwords for all your accounts.</p>
                            </div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-user-shield me-2"></i>Enable Two-Factor Authentication</h5>
                                <p class="card-text">Add an extra layer of security by enabling two-factor authentication (2FA) whenever possible.</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-sync-alt me-2"></i>Change Passwords Regularly</h5>
                                <p class="card-text">Update your passwords periodically, especially for sensitive accounts like banking and email.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ad Section - Bottom -->
                <div class="ad-container text-center my-4">
                    <div class="ad-placeholder">
                        <p>Advertisement Space</p>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4">
                <!-- Ad Section - Sidebar Top -->
                <div class="ad-container text-center mb-4">
                    <div class="ad-placeholder">
                        <p>Advertisement Space</p>
                    </div>
                </div>

                <!-- Related Tools -->
                <div class="sidebar mb-4">
                    <h4 class="sidebar-title">Related Tools</h4>
                    <div id="related-tools-container"></div>
                </div>

                <!-- Popular Tools -->
                <div class="sidebar">
                    <h4 class="sidebar-title">Popular Tools</h4>
                    <ul class="related-tools">
                        <li><a href="word-counter.html"><i class="fas fa-calculator me-2"></i> Word Counter</a></li>
                        <li><a href="image-to-png.html"><i class="fas fa-file-image me-2"></i> Image to PNG Converter</a></li>
                        <li><a href="qr-code-generator.html"><i class="fas fa-qrcode me-2"></i> QR Code Generator</a></li>
                        <li><a href="json-formatter.html"><i class="fas fa-code me-2"></i> JSON Formatter</a></li>
                        <li><a href="color-code-picker.html"><i class="fas fa-palette me-2"></i> Color Code Picker</a></li>
                    </ul>
                </div>

                <!-- Ad Section - Sidebar Bottom -->
                <div class="ad-container text-center mt-4">
                    <div class="ad-placeholder">
                        <p>Advertisement Space</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer will be loaded dynamically -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/tools-data.js"></script>
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get elements
            const passwordResult = document.getElementById('password-result');
            const copyPasswordBtn = document.getElementById('copy-password');
            const refreshPasswordBtn = document.getElementById('refresh-password');
            const generatePasswordBtn = document.getElementById('generate-password');
            const passwordLength = document.getElementById('password-length');
            const lengthValue = document.getElementById('length-value');
            const includeUppercase = document.getElementById('include-uppercase');
            const includeLowercase = document.getElementById('include-lowercase');
            const includeNumbers = document.getElementById('include-numbers');
            const includeSymbols = document.getElementById('include-symbols');
            const excludeSimilar = document.getElementById('exclude-similar');
            const excludeAmbiguous = document.getElementById('exclude-ambiguous');
            const strengthMeter = document.getElementById('strength-meter');
            const strengthText = document.getElementById('strength-text');
            const passwordHistoryTable = document.getElementById('password-history-table');
            const clearHistoryBtn = document.getElementById('clear-history');
            
            // Character sets
            const uppercaseChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const lowercaseChars = 'abcdefghijklmnopqrstuvwxyz';
            const numberChars = '0123456789';
            const symbolChars = '!@#$%^&*()_+-=[]{}|;:,.<>?';
            const similarChars = 'iIlL1oO0';
            const ambiguousChars = '{}[]()\/\'"~,;:.<>';
            
            // Password history
            let passwordHistory = JSON.parse(localStorage.getItem('passwordHistory')) || [];
            
            // Update length value display
            passwordLength.addEventListener('input', function() {
                lengthValue.textContent = this.value;
            });
            
            // Generate password on button click
            generatePasswordBtn.addEventListener('click', generatePassword);
            refreshPasswordBtn.addEventListener('click', generatePassword);
            
            // Copy password to clipboard
            copyPasswordBtn.addEventListener('click', function() {
                if (!passwordResult.value) return;
                
                passwordResult.select();
                document.execCommand('copy');
                
                // Show feedback
                const originalHTML = this.innerHTML;
                this.innerHTML = '<i class="fas fa-check"></i>';
                
                setTimeout(() => {
                    this.innerHTML = originalHTML;
                }, 2000);
            });
            
            // Clear password history
            clearHistoryBtn.addEventListener('click', function() {
                passwordHistory = [];
                localStorage.removeItem('passwordHistory');
                updatePasswordHistoryTable();
            });
            
            // Generate password function
            function generatePassword() {
                // Get options
                const length = parseInt(passwordLength.value);
                const options = {
                    uppercase: includeUppercase.checked,
                    lowercase: includeLowercase.checked,
                    numbers: includeNumbers.checked,
                    symbols: includeSymbols.checked,
                    excludeSimilar: excludeSimilar.checked,
                    excludeAmbiguous: excludeAmbiguous.checked
                };
                
                // Validate at least one character type is selected
                if (!options.uppercase && !options.lowercase && !options.numbers && !options.symbols) {
                    alert('Please select at least one character type.');
                    return;
                }
                
                // Build character pool
                let charPool = '';
                
                if (options.uppercase) charPool += uppercaseChars;
                if (options.lowercase) charPool += lowercaseChars;
                if (options.numbers) charPool += numberChars;
                if (options.symbols) charPool += symbolChars;
                
                // Remove similar characters if option is selected
                if (options.excludeSimilar) {
                    for (let i = 0; i < similarChars.length; i++) {
                        charPool = charPool.replace(new RegExp(similarChars[i], 'g'), '');
                    }
                }
                
                // Remove ambiguous characters if option is selected
                if (options.excludeAmbiguous) {
                    for (let i = 0; i < ambiguousChars.length; i++) {
                        charPool = charPool.replace(new RegExp('\\' + ambiguousChars[i], 'g'), '');
                    }
                }
                
                // Generate password
                let password = '';
                
                // Ensure at least one character from each selected type
                if (options.uppercase) {
                    const validChars = uppercaseChars.split('').filter(char => charPool.includes(char));
                    if (validChars.length > 0) {
                        password += validChars[Math.floor(Math.random() * validChars.length)];
                    }
                }
                
                if (options.lowercase) {
                    const validChars = lowercaseChars.split('').filter(char => charPool.includes(char));
                    if (validChars.length > 0) {
                        password += validChars[Math.floor(Math.random() * validChars.length)];
                    }
                }
                
                if (options.numbers) {
                    const validChars = numberChars.split('').filter(char => charPool.includes(char));
                    if (validChars.length > 0) {
                        password += validChars[Math.floor(Math.random() * validChars.length)];
                    }
                }
                
                if (options.symbols) {
                    const validChars = symbolChars.split('').filter(char => charPool.includes(char));
                    if (validChars.length > 0) {
                        password += validChars[Math.floor(Math.random() * validChars.length)];
                    }
                }
                
                // Fill the rest of the password
                while (password.length < length) {
                    const randomIndex = Math.floor(Math.random() * charPool.length);
                    password += charPool[randomIndex];
                }
                
                // Shuffle the password
                password = shuffleString(password);
                
                // Update password result
                passwordResult.value = password;
                
                // Calculate and update password strength
                updatePasswordStrength(password);
                
                // Add to password history
                addToPasswordHistory(password);
            }
            
            // Shuffle string function
            function shuffleString(string) {
                const array = string.split('');
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array.join('');
            }
            
            // Update password strength
            function updatePasswordStrength(password) {
                // Calculate strength score (0-100)
                let score = 0;
                
                // Length contribution (up to 40 points)
                score += Math.min(40, password.length * 2);
                
                // Character variety contribution (up to 60 points)
                const hasUppercase = /[A-Z]/.test(password);
                const hasLowercase = /[a-z]/.test(password);
                const hasNumbers = /[0-9]/.test(password);
                const hasSymbols = /[^A-Za-z0-9]/.test(password);
                
                if (hasUppercase) score += 15;
                if (hasLowercase) score += 15;
                if (hasNumbers) score += 15;
                if (hasSymbols) score += 15;
                
                // Update strength meter
                strengthMeter.style.width = score + '%';
                strengthMeter.setAttribute('aria-valuenow', score);
                
                // Update strength text and color
                if (score >= 80) {
                    strengthMeter.className = 'progress-bar bg-success';
                    strengthText.textContent = 'Very Strong';
                } else if (score >= 60) {
                    strengthMeter.className = 'progress-bar bg-info';
                    strengthText.textContent = 'Strong';
                } else if (score >= 40) {
                    strengthMeter.className = 'progress-bar bg-warning';
                    strengthText.textContent = 'Medium';
                } else {
                    strengthMeter.className = 'progress-bar bg-danger';
                    strengthText.textContent = 'Weak';
                }
                
                return score;
            }
            
            // Add password to history
            function addToPasswordHistory(password) {
                const strength = updatePasswordStrength(password);
                const strengthLabel = strength >= 80 ? 'Very Strong' : 
                                     strength >= 60 ? 'Strong' : 
                                     strength >= 40 ? 'Medium' : 'Weak';
                
                // Add to history array
                passwordHistory.unshift({
                    password: password,
                    length: password.length,
                    strength: strengthLabel,
                    strengthScore: strength
                });
                
                // Limit history to 10 items
                if (passwordHistory.length > 10) {
                    passwordHistory.pop();
                }
                
                // Save to localStorage
                localStorage.setItem('passwordHistory', JSON.stringify(passwordHistory));
                
                // Update table
                updatePasswordHistoryTable();
            }
            
            // Update password history table
            function updatePasswordHistoryTable() {
                if (passwordHistory.length === 0) {
                    passwordHistoryTable.innerHTML = '<tr><td colspan="4" class="text-center">No passwords generated yet</td></tr>';
                    return;
                }
                
                let html = '';
                
                passwordHistory.forEach((item, index) => {
                    const maskedPassword = maskPassword(item.password);
                    const strengthClass = item.strengthScore >= 80 ? 'success' : 
                                         item.strengthScore >= 60 ? 'info' : 
                                         item.strengthScore >= 40 ? 'warning' : 'danger';
                    
                    html += `
                        <tr>
                            <td>
                                <span class="password-mask">${maskedPassword}</span>
                                <button class="btn btn-sm btn-link show-password" data-index="${index}">Show</button>
                            </td>
                            <td>${item.length}</td>
                            <td><span class="badge bg-${strengthClass}">${item.strength}</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary copy-history" data-password="${item.password}">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="btn btn-sm btn-danger remove-history" data-index="${index}">
                                    <i class="fas fa-times"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                passwordHistoryTable.innerHTML = html;
                
                // Add event listeners to buttons
                document.querySelectorAll('.show-password').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        const passwordElement = this.previousElementSibling;
                        
                        if (this.textContent === 'Show') {
                            passwordElement.textContent = passwordHistory[index].password;
                            this.textContent = 'Hide';
                        } else {
                            passwordElement.textContent = maskPassword(passwordHistory[index].password);
                            this.textContent = 'Show';
                        }
                    });
                });
                
                document.querySelectorAll('.copy-history').forEach(button => {
                    button.addEventListener('click', function() {
                        const password = this.getAttribute('data-password');
                        
                        // Copy to clipboard
                        const tempInput = document.createElement('input');
                        tempInput.value = password;
                        document.body.appendChild(tempInput);
                        tempInput.select();
                        document.execCommand('copy');
                        document.body.removeChild(tempInput);
                        
                        // Show feedback
                        const originalHTML = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-check"></i>';
                        
                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                        }, 2000);
                    });
                });
                
                document.querySelectorAll('.remove-history').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        
                        // Remove from history
                        passwordHistory.splice(index, 1);
                        
                        // Save to localStorage
                        localStorage.setItem('passwordHistory', JSON.stringify(passwordHistory));
                        
                        // Update table
                        updatePasswordHistoryTable();
                    });
                });
            }
            
            // Mask password function
            function maskPassword(password) {
                return 'â€¢'.repeat(password.length);
            }
            
            // Generate initial password
            generatePassword();
            
            // Load initial password history
            updatePasswordHistoryTable();
            
            // Load related tools
            renderRelatedTools('password-generator', 'security-tools', 'related-tools-container');
        });
    </script>
</body>
</html> 